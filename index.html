<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Epic / Fortnite ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ & ã‚¢ã‚¤ãƒ†ãƒ ã‚·ãƒ§ãƒƒãƒ—</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:system-ui,sans-serif;
  background:#0f172a;
  color:#e5e7eb;
  padding:20px;
}
h1,h2{text-align:center}
.section{margin:30px 0}
.card{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:12px;
  padding:12px;
  margin-bottom:10px;
}
.ok{color:#22c55e}
.warn{color:#facc15}
.down{color:#ef4444}

.shop{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:12px;
}
.item{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:10px;
  padding:8px;
  text-align:center;
}
.item img{
  width:100%;
  border-radius:8px;
}
.price{margin-top:6px;font-size:13px}
.footer{
  text-align:center;
  font-size:12px;
  opacity:.7;
  margin-top:20px;
}
</style>
</head>
<body>

<h1>ğŸ® Fortnite ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>

<div class="section">
<h2>ğŸŒ Epic Games ç¨¼åƒçŠ¶æ³</h2>
<div id="epic">èª­ã¿è¾¼ã¿ä¸­...</div>
</div>

<div class="section">
<h2>ğŸ›’ æœ¬æ—¥ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚·ãƒ§ãƒƒãƒ—</h2>
<div id="shop" class="shop">èª­ã¿è¾¼ã¿ä¸­...</div>
</div>

<div class="footer" id="updated"></div>

<script>
/* ---------- Epic Status ---------- */
const EPIC_URL="https://status.epicgames.com/api/v2/components.json";

function epicStatusText(s){
  if(s==="operational")return["ğŸŸ¢","ç¨¼åƒä¸­","ok"];
  if(s==="degraded_performance")return["ğŸŸ¡","æ€§èƒ½ä½ä¸‹","warn"];
  if(s==="partial_outage")return["ğŸŸ ","ä¸€éƒ¨éšœå®³","warn"];
  if(s==="major_outage")return["ğŸ”´","éšœå®³","down"];
  if(s==="under_maintenance")return["ğŸ”µ","ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹","warn"];
  return["âšª",s,""];
}

async function loadEpic(){
  const res=await fetch(EPIC_URL);
  const data=await res.json();
  const box=document.getElementById("epic");
  box.innerHTML="";
  data.components.forEach(c=>{
    const [i,t,cls]=epicStatusText(c.status);
    box.innerHTML+=`
      <div class="card">
        <b>${i} ${c.name}</b><br>
        <span class="${cls}">${t}</span>
      </div>`;
  });
}

/* ---------- Item Shop ---------- */
const SHOP_URL="https://fortnite-api.com/v2/shop/br";

async function loadShop(){
  const res=await fetch(SHOP_URL);
  const data=await res.json();
  const shop=document.getElementById("shop");
  shop.innerHTML="";
  data.data.featured.entries.forEach(e=>{
    const item=e.items[0];
    shop.innerHTML+=`
      <div class="item">
        <img src="${item.images.icon}" alt="">
        <div>${item.name}</div>
        <div class="price">ğŸ’° ${e.finalPrice} V-Bucks</div>
      </div>`;
  });
}

/* ---------- Init ---------- */
async function init(){
  try{
    await loadEpic();
    await loadShop();
    document.getElementById("updated").textContent=
      "æœ€çµ‚æ›´æ–°ï¼š"+new Date().toLocaleString();
  }catch{
    document.body.innerHTML="âŒ ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ";
  }
}

init();
setInterval(loadEpic,300000);   // Epic 5åˆ†
setInterval(loadShop,1800000);  // Shop 30åˆ†
</script>

</body>
</html>
