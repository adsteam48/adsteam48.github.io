<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Cloud Server</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; }
  h1 { color: #2c3e50; }
  form { margin-bottom: 20px; }
  input[type="file"], input[type="text"], select { margin: 5px 0; }
  ul { list-style-type: none; padding: 0; }
  li { margin: 5px 0; }
  a { color: #2980b9; text-decoration: none; }
  a:hover { text-decoration: underline; }
  .messages { color: green; }
</style>
</head>
<body>
<h1>Welcome, {{ username }}</h1>

<!-- „Éï„Ç©„É´„ÉÄ‰ΩúÊàê -->
<form action="/create_folder" method="post">
  <input type="text" name="folder_name" placeholder="New Folder" required>
  <input type="submit" value="Create Folder">
</form>

<!-- „Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
<form method="post" enctype="multipart/form-data">
  <input type="file" name="file" required>
  <select name="target_folder">
    <option value="">Root</option>
    {% for folder in folders %}
      <option value="{{ folder }}">{{ folder }}</option>
    {% endfor %}
  </select>
  <input type="submit" value="Upload">
</form>

<!-- „Éï„Ç©„É´„ÉÄ„Éª„Éï„Ç°„Ç§„É´‰∏ÄË¶ß -->
<h2>Files & Folders</h2>
<ul>
  {% for folder in folders %}
    <li>üìÅ {{ folder }} 
      <a href="/delete_folder/{{ folder }}">[Delete]</a>
    </li>
  {% endfor %}

  {% for file in files %}
    <li>üìÑ <a href="/files/{{ file }}" download>{{ file }}</a> 
        <a href="/delete/{{ file }}">[Delete]</a>
    </li>
  {% endfor %}
</ul>

<a href="/logout">Logout</a>

<!-- „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫ -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="messages">
      {% for msg in messages %}
        <li>{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
</body>
</html>
